<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title id="page_title">第十五夜・崩壊と浄化</title>
        <link rel="stylesheet" type="text/css" href="../../../../common/format.css">
        <link rel="stylesheet" type="text/css" href="../../../common/common.css">
        <link rel="stylesheet" type="text/css" href="./common.css">
        <link rel="stylesheet" type="text/css" href="../../../../common/hidden.css">
        <script type="text/javascript" src="../../../../common/password01.js"></script>
    </head>
    <body>
        <header>
            <iframe class="header" src="../../../../common/header.html" frameborder="0"></iframe>
        </header>
        <div class="contents">
            <iframe class="menu" src="../../../../common/menu.html" frameborder="0"></iframe>
            <div class="main">
                <h1 id="title"><img class="icon" src="../../../../common/images/blog.png" />第十五夜・崩壊と浄化</h1>
                <p class="date">2020/11/26</p>
                <div class="paper">
                    <p>
十五夜というとそれ自体で固有名詞になってるからか少し違和感が。<br>
ちなみに今日は満月ではないようですね。次の満月は半影月食になるようです。<br>
<br>
とは言いつつも、なかなか夜が巡ってこないのは相変わらずのようで。<br>
少しフォルダ全体で変更したこととして、それぞれのファイル名にタイトルを明記した。だって通し番号振ってあるんだからさあ、その上で「第xx夜」だなんてねえ。なんも情報が得られないじゃないの。<br>
そういった経緯から最初の方のファイルも見返した訳だが、まああれだ。なかなか平然と見ていられる物でもない。「何だこいつ、しゃしゃるだけしゃしゃり出て一体何をわかってるってんだい」なんて突っ込みたくなるような。まあこの文章も数年後に見返すことがあれば、直視できないほどの酷い文章にしか見えないのかもしれないけどな。<br>
そういえば、寿司打sushida10000円コースでお得が3000円を越えるようになった。5.4回/秒。まあこれ→！とこれ→？は打てないんだけど。さて、「数年後」にはどうなっているのやら。<br>
<br>
そういえばさ、<br>
ブリッツカー賞のことを「建築界のノーベル賞」とはいうけれど、<br>
ノーベル賞のことを「科学界のブリッツカー賞」とは言わないよね。<br>
どっちも正しいんだけど、なんか一方通行というか。まあそりゃそうなんだけれども。<br>
<br>
<br>
前置きはほどほどにして。<br>
今までもパソコンに頭を悩ませることはしばしばあったが、今回はその中でもなかなかに手強いものだった。どうもタイトルにもあるように、「崩壊」したようなのだ。<br>
一体何のことだか。実は本当に「この辺」の問題だった。<br>
第十夜で話したっぽい、まあ記憶にないが。つまりはこのファイルのあるフォルダの親の親の親の親、かな。private.dmgのこと。<br>
まず端的に話しましょうか。これ、昨夜と今夜で変わってます。<br>
え、どゆこと？<br>
つまり、中身はそのままに、外身が変わってるんですよね。<br>
ええ。<br>
あ、じゃあお決まりの付属フォルダ￼に、前のディスクイメージの情報と、今のディスクイメージの情報を載せとくね。ええっと、まあファイル数とか少し変わってるけど、そこは気にしないでね。<br>
<br>
ことの発端は、第五・六夜あたりで詳しく話していたと思う、キャッシュファイルを含む所謂「システムファイル」ってなやつだった。あの名前の最初がドットになってるやつ。<br>
このディスクイメージにも当然のことながらそんなファイルが存在するわけで。それどころか、自分でも作ってる。ほら、背景画像がカスタマイズされてるでしょ？あの画像を格納しているドットファイルがちゃんとこの中に入っているの。まあドットがつくファイルは普通の場合不可視化されてるから、どこをクリックしようがそんなフォルダ開かれないんだけどね。<br>
さてと。ここからなかなか重い話になるから、引き返すなら今のうちだよ？<br>
#<br>
#<br>
#<br>
#<br>
#<br>
#<br>
#<br>
#<br>
#<br>
#<br>
じゃあ話を続けよう。<br>
要するに、「見えないフォルダ」が作れるって訳だ。ともすると、まあいろんなものを収納できるって訳なのよね。。。。<br>
それで、以前のディスクイメージのとき、色々とファイルをドットファイルに投げ込んでいたのね。<br>
別に隠さなくてもそもそもパスワード要求されるんだしいいじゃん。、、いや、そうにもいかないもので。<br>
<br>
さて、あるフォルダ（画像ファイルがたくさん入っている）を投げ込んでいた時だ。<br>
エラーコード-36<br>
ってものが出てきた。<br>
それと同時に処理はダウンした。<br>
再び投げ込もうとしても、エラーコードが出てくるばかりでたったの画像ファイル１枚ですら入らない。<br>
それどころか、全く別の画像ファイルをとってきて、それを入れようとしても入らなくなってしまった。<br>
さらに、それは投げ込み先のドットファイルだけの問題ではなく、ディスクイメージの中のフォルダ全体に及んでいて、もはやディスクイメージの中に画像ファイルを投げ込むことが完全に不可能になってしまった。<br>
ーというと少し語弊がある。極端に軽い画像ファイルなら一応入った。<br>
さて、さっきから「画像ファイル」と言っているが、つまり画像ファイル以外なら一応は入れることができた。まあそれも訳ありだったんだけどね。それは後で言及しよう。<br>
さてさて、どうしたことか。<br>
<br>
一応回避策はあった。ターミナルを使った強制コピーor強制移動ってのができてね、<br>
コピー：　cp -r [ファイル/ディレクトリ名] [コピー先のパス]<br>
移動：     mv -r [ファイル/ディレクトリ名] [移動先のパス]<br>
＜注釈＞　コピー・移動するのがファイルの場合、”-r”は必要ない<br>
こんなので一応は投げ入れられるの。ただし、もはやこのほかに手立てがない。何を入れようにもターミナルから入れるしかない。<br>
まあそれならただ少し面倒になるだけだからいいじゃん、なんて思ったらそうでもなかったんだよねえ…<br>
本来、データの転送が上手くいかなかったがためにコピーが中断するところを強引に押し通してるのがこの方法。つまり…<br>
「開けない」<br>
まあそれ以前に入れていたファイルに関してはデータの破損なんかは起こっていないから普通に開けるのだけど、新しく強引に入れたものは全て開けなかった。<br>
先ほど訳ありと言った話、ここに繋がってくるのよ。テキストファイルを入れることならできた。でもね、内部で編集をした途端にそのテキストファイルは開かなくなってしまったっていうこと。<br>
何というかさあ。いや、何でも…<br>
<br>
つまり、<br>
このディスクイメージ、完全に過去の記憶でしかなくなってしまった。<br>
かつて入れたものに関しては問題なくアクセスできるが、新規で入れようにも入らない・入れても破損して開けない。<br>
Time Machineを使って何度も過去のディスクイメージを復元しては色々入れ方を変えて試してみたが、やはり例のフォルダを入れている最中に問題が発生して、それ以降同じ症状に陥ってしまう。<br>
<br>
さて、しゅーふくたーいむ！！<br>
まず「エラーコード-36」について調べたところ、もっとも多く出てきたのが次のようなものだ。<br>
「内部のドット-アンダースコアファイルがインポートを阻害するため、ターミナルで対象のボリュームについて”dot_clean”を実行すれば、インポートできるようになる。」<br>
Windowsの形式（FATなど）でエンコードされてるファイルをインポートしようとすると発生するという。いやいや、これ画像ファイルなんだけどなあ。<br>
まあ試さないことには進まない、ってなことで実際に実行してみたら、ことごとく失敗。仕方ないのでスーパーユーザーになって（ターミナルでコマンドの頭に”sudo”と打つと一時的になれるよ）強引に実行。しかし症状は全くもって改善されず。<br>
他にも「エラーコード-36」について色々と調べると、「HDDへの電力不足」だの「投げ込むファイルの一部がそもそも破損している」だので生じることがあるのは分かったが、どうもこれら全て当てはまってないんだよなあ。何かいい方法は…。<br>
<br>
「投げ込むファイルの一部がそもそも破損している」ってことの検証として、新たなディスクイメージを作成してみて、その中に投げ込むということをしてみた。もし破損ファイルが含まれるならばこれは失敗するはずーなのが、成功した。わー、おめでとう。<br>
ほーん、ということは、新しいディスクイメージなら問題ない、と。<br>
じゃあ、やっぱり現行のディスクイメージの問題なんじゃない？<br>
ということで、ディスクユーティリティから「検証」などいろいろと試したのだが、みーんな失敗してしまう。じゃあ尚更、もはやディスクイメージ自体が崩壊しかけてるんじゃないの？<br>
「崩壊」<br>
<br>
何でかはわからないが、ディスクイメージ内の何らかのドットファイルと、投げ込もうとしたフォルダ（の内のファイル）が拒絶反応を起こしているのではなかろうか。<br>
もしそうであるとしたら、それは不可逆的なものかもしれない。もはや現行のディスクイメージでこれを達成することは不可能だ。<br>
そういうことで、盛大にお引っ越ししたってことですね。<br>
<br>
まあやることはいたって簡単。壊れたファイル以外はそのまま移し、壊れたファイルは壊れていないオリジナルを移す。てなもんなので別に四半時間（←四時間半じゃないよ！！）もかからずにお引っ越し完了。ひとまず解決した。<br>
「浄化」<br>
<br>
<br>
結局、どこぞの「探し物」フォルダ内で「時には諦めも肝要」だなんて言っておきながら、全く諦めなかったことでかなりの時間を棒に振るうこととなった。<br>
根本的な原因は解明できなかったが、おそらく次のようなものだ。<br>
…<br>
まず、例のディスクイメージ内のあるドットファイルについて、それ以前にインポートしたファイルの関係か、もしくは意図せず起きた間違いでかは分からないが、ある状態になるとエラーを起こすような不安定な状態になっていた。そのドットファイルというのは、おそらくボリューム内にインポートする際の処理に関わってくるものだった。もっと言ってしまうと、メモリの管理のようなことをしていたのだろうと推測している。、、、え、根拠は？それは後で。<br>
さて、とあるフォルダをインポートしていたとき、何らかのきっかけによってその問題を孕んだドットファイルがエラーを吐いた。きっかけ、それはフォルダの中身が極端に多かったからか、それとも中のファイルの形状の問題なのかは分からない。それは置いておいて、ドットファイルがエラーを吐いたことによって、処理がそこから先へは進めなくなった。これがインポートできなくなった理由と推測される。<br>
一方で、ターミナルで強制コピーした場合、この障壁を強引に破ったために適切な処理がなされず、コピーしたファイルが全て破損することになったと考えられる。<br>
一方極めて軽いファイルの場合、そのドットファイルが干渉するほど大きな処理ではなかったために、そこを難なく突破できたと思われる。画像ファイル以外のファイルの場合も同様。そもそも処理経路にそのドットファイルが存在しないのであれば問題なくインポートできる。<br>
さて、では編集したテキストファイルが破損したということについてだが、編集中に自動でファイルが更新される訳だが、そこの経路上に例のドットファイルがあったと考えれば辻褄が合う。ということは、そのドットファイルはやはりメモリ関連なんじゃないのっちゅうこと。<br>
で、新しくディスクイメージを作った場合、そのドットファイルにエラーは起こっていないので正常にインポートできるってことなんじゃないかなと。<br>
…<br>
まあ雑であることは重々承知だが、正直これが今の限界す。文章的にも。<br>
なんかさあ、途中から対話口調と語り口調の融合が全然上手くいかなかった気がするのね。気のせいならいいのだけれど。<br>
<br>
しっかしあれだな。久しぶりに長話になった気がする。まあ考えてみれば当然のことなんだけれどもね。<br>
パソコンの話の大抵は新しい「発見」だとか「拡張」だとかがトピックになるし、そうであればあくまで「こんなことをしたよ～」てな形式になるんだけれども。<br>
それが今回の場合はトライアンドエラーを織り込んだためにこうして長々とした話になったってことだ。まあだって最初の夜だってそんな感じだったでしょ（と言いつつ本人は覚えてないです）。ああ、二日目、三日目は例外ね。だってあれは全然別の話じゃん。<br>
さあて、夜も更けてきた。旧暦11日の月はもうじき沈むであろう。ではまた。<br>

                    </p>
                </div>
                <div class="bottom">
                    <a href="#">ページトップへ</a><br>
                    <a href="../black_main.html">墨染めの書架</a><br>
                    <a href="../../../main.html">雜錄の書庫</a>
                </div>
            </div>
        </div>
        <footer>
            <iframe class="footer" src="../../../../common/footer.html" frameborder="0"></iframe>
        </footer>
    </body>
</html>
