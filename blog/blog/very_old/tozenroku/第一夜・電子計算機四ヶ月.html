<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title id="page_title">第一夜・電子計算機四ヶ月</title>
        <link rel="stylesheet" type="text/css" href="../../../../common/format.css">
        <link rel="stylesheet" type="text/css" href="../../../common/common.css">
        <link rel="stylesheet" type="text/css" href="../../../../common/hidden.css">
        <script type="text/javascript" src="../../../../common/password01.js"></script>
    </head>
    <body>
        <header>
            <iframe class="header" src="../../../../common/header.html" frameborder="0"></iframe>
        </header>
        <div class="contents">
            <iframe class="menu" src="../../../../common/menu.html" frameborder="0"></iframe>
            <div class="main">
                <h1 id="title"><img class="icon" src="../../../../common/images/blog.png" />第一夜・電子計算機四ヶ月</h1>
                <p class="date">2019/05/02</p>
                <div class="paper">
                    <h2 class="top">序章　突然ノ異常。</h2>
                    <p>
　平成30年12月上旬、普通にプログラミングをしていた。内容はただ模様を描くだけという単純なもの。frameRateは標準の60になっていた筈。ソースコードも100行を超える程度の短いもの。しかし描画中、突如パソコンの画面が乱れた。極めて高速で上下に震えながら、パソコンの端が中央付近にずれ、マウスのポインタも、縦に十個ほど並んだ点―かの有名なシューメーカー・レビー第九彗星のような形になり、まもなく電源が落ちた。<br>
　再起動すると、画面には黒と緑の縦縞が30本並んだものが、起動画面に網かけされる。それはアップルマークが出て、読み込み中のバーが約半分まで伸びてくるあたりまで続く。すると突然画面が真っ白になり、ファンが勢いよく回り出す。この時点から、パソコンの動きが変化することはない。ただ、充電が切れて電源が落ちるまでの間、ずっとこれが続くのである。あまりにも不意で、そして見慣れない挙動に恐怖さえ感じた。全く理解不能だったが、とにかく慌てずに対処しようと考えた。
                    </p>
                    <h2>第２章　混沌ノ深淵。</h2>
                    <p>
　まずは一般的な対処方法から実施した。症状が現れた後、強制終了させても症状は改善しない。即座にNVRAMやSMCのリセットを試みた。しかし何度やってもだめ。Apple Hardware Testは起動可能だったため、それで診断してみた。しかし結果は２通りあるという極めて理解しがたいことになってしまった。多くの場合、問題なしと診断される。しかし、正常にに立ち上がったあと落ちて直ぐの場合に限り、メモリに問題があると診断されるのである。全く、訳の分からない話になってしまった。<br>
　こんなことをしているうちにも、何故だか起動ができる場合があった。そのようなときには、ソフトウェア同士の干渉について調べるため、今までダウンロードしてきたソフトのいくつかを消去して、様子を調べてみた。特に、ちょうど症状が現れたときに使っていたプログラミング言語のコンパイラのアップデートを怠っていたり、新しいプログラミング言語を勉強しようと、また別のコンパイラをダウンロードしたりしていたため、そのようなところに問題の発端があると考えることが自然であり、ソフトウェア同士の干渉が原因となっているという考え方は最も可能性の高いもののひとつであった。しかし、それでも解決しなかったのである。<br>
　そのうち、症状が現れる頻度はますます高まっていき、正常に起動することはますます難しくなっていった。最初のうちは、一日放置すれば正常に起動できていたのだ。しかし、そんなことを繰り返しているうちになかなか起動できなくなってきたのである。<br>
　こんなことを１ヶ月以上もの間、繰り返していたのだが、結局解決策を打ち出すことは出来なかった。これ以上いじっていても無駄だと悟り、新しいメモリを入手した。
                    </p>
                    <h2>第３章　分解ノ日々。</h2>
                    <p>
　いよいよメモリの差し替えである。差し替える前に、一度起動させてみた。問題が直っていないことが確認された。ここで、問題のあるメモリはどちらか一方である可能性が高い。両方が同時に壊れているというのは考えにくいからだ。そのため、元々差し込まれているメモリのうちの片方を変え、どちらに問題があるのかあぶり出そうと考えた。<br>
　パソコンを裏向きに置き、小さく繊細なねじ、計10本を慎重に取り外す。右側にロジックボード、左側にバッテリーなどが極めてコンパクトにまとめられている。そのちょうど真ん中にメモリスロットがあり、4GBのメモリが二つ重なって差し込まれていた。そのうちの片方を外し、新しいものに差し替える。裏蓋を閉じ、起動してみた。<br>
―症状は変わらなかった。<br>
外した方は戻し、もう片方のメモリを差し替えて、再度起動してみた。<br>
―症状は変わらなかった。<br>
いっそ両方差し替えてみようか。度重なる強制終了による負荷で、どっちも壊れてしまったのではないだろうか。そう思い、新しいメモリに完全に変えた。<br>
―症状は変わらなかった。<br>
　どうしたものだろうか。症状は治らないではないか。何度かメモリを脱着させた。すると不思議なことに、希にではあるが正常に起動できるのである。しかし、むしろ恐ろしいのは、この「確率的に正常に起動できる」ことだ。全く原因が分からなくなってしまうのである。<br>
　ある時、いつものごとく正常起動できたものの落ちてしまい、症状が現れた。久しぶりにApple Hardware Testを行った。メモリに問題があると診断された。変えたばっかりのメモリなのに壊れるはずがない。SSDにも問題はない。ということは、ロジックボード上に問題があり、それがメモリに顕著に表れているのではなかろうか。
                    </p>
                    <h2>第４章　出現ス黒幕。</h2>
                    <p>
　似たような症例がないか調べてみた。Appleコミュニティにおいて、ある方が同じ症例について質問をしていた。それに対する回答の一部に、問題のあるモデルとして「MacBook Pro early 2011」が挙げられていた。調べてみると、このモデルでは似たような症状がいくつも発生していることが分かった。そしてそれは、内蔵GPUの「AMD Radeon HD 6750M」の問題であることも分かった。では、このモデル、そしてGPUはなんだろうか。パソコンの空箱を取り出し、モデル名を見た。<br>
―MacBook Pro early 2011<br>
―AMD Radeon HD 6750M<br>
　完全に一致していたのである。
                    </p>
                    <h2>第５章　実態ノ調査。</h2>
                    <p>
　原因さえ分かれば、あとは速い。まずはこのモデルのGPUの問題について具体的に調べてみた。どうやら、ビデオチップのハンダにクラックが入ることによって起こる症状であり、モデル自体、昔はリコールがかかっていたようである。では、どのようにすればようのだろうか。第一まだ正常起動を行う方法すら確立していないというのに。<br>
　以前、ある発見があった。パソコンに症状が出たとき、電源コードを抜いて、電源が切れるまで放置し続ける。その後起動させると、かなりの高確率で正常に起動できたのである。そのときには、何故これで症状が現れないのか、その理由は全く分からなかった。<br>
　バッテリーを空にするところがキモだと考えた。しかし、やはりうまくいかなくなってしまった。あらかじめバッテリーを空にしておいて、充電をしながら電源を点けても、症状が消えることはなかったのである。一週間近く放置しても症状は消えなかった。<br>
　仕方ないので、とりあえず、起動できたとしてどうGPUの問題に対処するか調べることにした。問題があるのはAMDのGPU。一方で、CPUにも、性能はそれに及ばないもののIntelのGPUが内蔵されている。すなわち、AMDのGPUを無効にすれば、症状は出ない。そんなところでこれを行う為の方法を調べてみた。すると有り難いことに、正常起動させる方法も書いてあった。それは、「症状が起こった状態のままパソコンの蓋を閉じ、毛布でくるんで熱々の状態、熱暴走間際の状態に意図的に持って行く。電源が切れ次第、ほかほかなうちにパソコンを起動させる」というもの。高熱下ではCPUの内蔵GPUの方で起動するという性質が利用されている。なるほど、つまり今までやってきた自己流の正常起動の方法は、無意識にこれに近いことをやっていたということなのだった。そして、あるときから正常起動出来なかったのは、本来は「熱く」しないといけないところを、「バッテリーを空にする」と、間違って解釈していたところに原因があったということなのだ。
                    </p>
                    <h2>第６章　復旧ノ作戦。</h2>
                    <p>
　ついに復旧作戦を実行するときが来た。まずはほかほか起動で正常起動し、シングルユーザーモードに入る。ここで、問題のAMDのGPUを無効にさせるように、事前に調べたプログラムを打ち込む。rebootさせ、正常起動を確認。デスクトップより林檎マークへ進み、「このMacについて」でグラフィックスがIntelのGPUになっていることを確認し、此を以て第一次復旧作戦が終了された。<br>
　一方で、新たなパソコンを入手することも決まった。現在平成三十一年、一方このパソコンが作られたのは平成二十三年、東日本大震災の年である。既に八年が経っているのだ。むしろ、八年経ってもこのパフォーマンスのMacBook Proの凄ささえうかがえるほどである。しかし、やはり八年も経つとだいぶ変わってくる。WindowsXPがWindows10になっているのだ。ソフトウェアにハードウェアがついて行けなくなる前にハードウェアを更新しておく必要性もある。次はiMacか。
                    </p>
                    <h2>＜終章　四ヶ月の苦闘の成果＞</h2>
                    <p>
　四ヶ月もの時間が必要だったのだろうか。最初から症例を調べればもっと早く終わったのではなかろうか。後になってみるとそのような考えも生まれる。しかし、この四ヶ月は、決して無駄ではなかった。いつのまにかキーボードへの打ち込みも速くなり、トラブルが起きたときの対応についてもだいぶ分かってきた。パソコンに関する知識を培う上で、この四ヶ月が果たした役割は大変大きなものだといえよう。
                    </p>
                    <h2>追記</h2>
                    <p>
　はい、再発しました、うん！<br>
iMacもあるので洋梨です。面倒なので治しません。ゆっくり寝ていてください。<br>
では。
                    </p>
                </div>
                <div class="bottom">
                    <a href="#">ページトップへ</a><br>
                    <a href="../black_main.html">墨染めの書架</a><br>
                    <a href="../../../main.html">雜錄の書庫</a>
                </div>
            </div>
        </div>
        <footer>
            <iframe class="footer" src="../../../../common/footer.html" frameborder="0"></iframe>
        </footer>
    </body>
</html>
